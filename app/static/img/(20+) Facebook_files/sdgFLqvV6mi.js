if (self.CavalryLogger) { CavalryLogger.start_js(["FA1uf"]); }

__d("MWChatMediaRootQuery.graphql",["relay-runtime"],function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"after"},b={defaultValue:null,kind:"LocalArgument",name:"before"},c={defaultValue:null,kind:"LocalArgument",name:"first"},d={defaultValue:null,kind:"LocalArgument",name:"last"},e={defaultValue:null,kind:"LocalArgument",name:"messageID"},f={defaultValue:null,kind:"LocalArgument",name:"scale"},g={defaultValue:null,kind:"LocalArgument",name:"threadID"},h=[{kind:"Variable",name:"id",variableName:"threadID"}],i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},j=[{kind:"Variable",name:"after",variableName:"after"},{kind:"Variable",name:"before",variableName:"before"},{kind:"Variable",name:"first",variableName:"first"},{kind:"Variable",name:"last",variableName:"last"},{kind:"Variable",name:"message_id",variableName:"messageID"},{kind:"Literal",name:"message_shared_media_type",value:"PHOTO_AND_VIDEO"}],k={alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"timestamp_precise",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"legacy_attachment_id",storageKey:null},o={alias:null,args:[{kind:"Literal",name:"height",value:2048},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:2048}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"downloadable_uri",storageKey:null}],storageKey:null},p={kind:"InlineFragment",selections:[n,{alias:null,args:null,kind:"ScalarField",name:"blurred_image_uri",storageKey:null},o],type:"MessageImage",abstractKey:null};n={kind:"InlineFragment",selections:[n,{alias:"sdUrl",args:[{kind:"Literal",name:"quality",value:"SD"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(quality:"SD")'},{alias:"hdUrl",args:[{kind:"Literal",name:"quality",value:"HD"}],kind:"ScalarField",name:"playable_url",storageKey:'playable_url(quality:"HD")'},o,{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"original_dimensions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null}],type:"MessageVideo",abstractKey:null};o={alias:null,args:null,kind:"ScalarField",name:"cursor",storageKey:null};var q={alias:null,args:null,concreteType:"PageInfo",kind:"LinkedField",name:"page_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_next_page",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"has_previous_page",storageKey:null}],storageKey:null},r={kind:"InlineFragment",selections:[i],type:"Node",abstractKey:"__isNode"};return{fragment:{argumentDefinitions:[a,b,c,d,e,f,g],kind:"Fragment",metadata:null,name:"MWChatMediaRootQuery",selections:[{alias:null,args:h,concreteType:"MessageThread",kind:"LinkedField",name:"message_thread",plural:!1,selections:[i,{alias:null,args:j,concreteType:"MessagesWithAttachmentsOfThreadConnection",kind:"LinkedField",name:"messages_with_attachments",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagesWithAttachmentsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[k,i,l,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:[m,p,n],storageKey:null}],type:"UserMessage",abstractKey:null}],storageKey:null},o],storageKey:null},q],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[g,e,a,c,b,d,f],kind:"Operation",name:"MWChatMediaRootQuery",selections:[{alias:null,args:h,concreteType:"MessageThread",kind:"LinkedField",name:"message_thread",plural:!1,selections:[i,{alias:null,args:j,concreteType:"MessagesWithAttachmentsOfThreadConnection",kind:"LinkedField",name:"messages_with_attachments",plural:!1,selections:[{alias:null,args:null,concreteType:"MessagesWithAttachmentsOfThreadEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[m,{kind:"InlineFragment",selections:[k,i,l,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blob_attachments",plural:!0,selections:[m,p,n,r],storageKey:null}],type:"UserMessage",abstractKey:null},r],storageKey:null},o],storageKey:null},q],storageKey:null}],storageKey:null}]},params:{id:"2943836832390210",metadata:{relayPreloadable:!0},name:"MWChatMediaRootQuery",operationKind:"query",text:null}}}();a.params.id!=null&&b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a},null);
__d("MWMSForwardMessage.re",["bs_curry","MWMSForwardMessage.bs"],function(a,b,c,d,e,f){a=function(){var a=b("MWMSForwardMessage.bs").useForwardAttachment();return function(c){c=b("bs_curry")._2(a,c.to_,c.copyAttachmentID);return c}};f.useForwardAttachment=a},null);
__d("MWChatMediaData",[],function(a,b,c,d,e,f){"use strict";var g=function(a){return a==null||a.__typename!=="MessageVideo"||a.sdUrl==null||a.image==null||a.image.uri==null||a.image.width==null||a.image.height==null||a.original_dimensions==null||a.original_dimensions.x==null||a.original_dimensions.y==null?null:{hdUrl:a.hdUrl,image:{downloadableUri:a.image.downloadable_uri,height:a.image.height,uri:a.image.uri,width:a.image.width},legacyAttachmentID:a.legacy_attachment_id,originalDimensions:{x:a.original_dimensions.x,y:a.original_dimensions.y},sdUrl:a.sdUrl}},h=function(a){return a==null||a.__typename!=="MessageImage"||a.image==null||a.image.uri==null||a.image.width==null||a.image.height==null?null:{blurredImageUri:a.blurred_image_uri,image:{downloadableUri:a.image.downloadable_uri,height:a.image.height,uri:a.image.uri,width:a.image.width},legacyAttachmentID:a.legacy_attachment_id}};a=function(a){return a.reduce(function(a,b){if(b==null||b.node==null||b.node.id==null||b.node.message_id==null||b.node.blob_attachments==null||b.cursor==null)return a;var c=b.node,d=c.blob_attachments,e=c.id,f=c.message_id,i=c.timestamp_precise,j=b.cursor;c=d.map(function(a){if(a.__typename==="MessageImage"){var b=h(a);return b==null?null:{__typename:"MessageImage",attachment:b,cursor:j,messageID:f,nodeID:e,timestamp:i}}else if(a.__typename==="MessageVideo"){b=g(a);return b==null?null:{__typename:"MessageVideo",attachment:b,cursor:j,messageID:f,nodeID:e,timestamp:i}}else return null}).filter(Boolean);return a.concat(c)},[]).filter(Boolean)};e.exports={normalizeMessages:a}},null);
__d("MWChatMediaReducer",[],function(a,b,c,d,e,f){"use strict";a={curIdx:0,hasNextPage:!1,hasPrevPage:!1,initialCursor:null,isFetchingNextPage:!1,isFetchingPrevPage:!1,mediaList:[]};b=function(a,b){switch(b.type){case"initialize":return babelHelpers["extends"]({},a,{curIdx:b.curIdx,initialCursor:b.initialCursor,mediaList:b.mediaList});case"startFetchingNextPage":return babelHelpers["extends"]({},a,{isFetchingNextPage:!0});case"startFetchingPrevPage":return babelHelpers["extends"]({},a,{isFetchingPrevPage:!0});case"prevPageReceived":return babelHelpers["extends"]({},a,{curIdx:a.curIdx+b.medias.length,hasPrevPage:b.hasPrevPage,isFetchingPrevPage:!1,mediaList:b.medias.concat(a.mediaList)});case"nextPageReceived":return babelHelpers["extends"]({},a,{hasNextPage:b.hasNextPage,isFetchingNextPage:!1,mediaList:a.mediaList.concat(b.medias)});case"messageDeleted":return babelHelpers["extends"]({},a,{curIdx:Math.min(Math.max(b.curIdx,0),a.mediaList.length-1),mediaList:b.mediaList});case"viewMediaAtIndex":return babelHelpers["extends"]({},a,{curIdx:Math.min(Math.max(b.curIdx,0),a.mediaList.length-1)});default:return a}};e.exports={initialState:a,reducer:b}},null);
__d("MWChatMediaViewerImage.react",["fbt","CometHero.react","CometPagelet.react","CometPhotoViewerImageSuspense","CometPhotoViewerInnerWrapper.react","CometPressable.react","React"],function(a,b,c,d,e,f,g){"use strict";var h=b("CometPhotoViewerInnerWrapper.react").CometPhotoViewerImageWrapper,i=b("CometPhotoViewerInnerWrapper.react").CometPhotoViewerPlaceholderWrapper,j=b("CometPhotoViewerInnerWrapper.react").useCometPhotoViewerContainerStyles,k=b("React");c=b("React");var l=c.useState,m=g._("Nenhuma descri\u00e7\u00e3o dispon\u00edvel.");function a(a){var c=a.blurredImageURI,d=a.imageURI,e=a.origHeight,f=a.origSrc;a=a.origWidth;var n=l(!1),o=n[0],p=n[1];n=j(!0);return k.jsxs(b("CometPagelet.react").Placeholder,{className:n,fallback:f!=null?k.jsx(i,{height:e,imageUri:f,showPlaceholderImage:f!=null&&a!=null&&e!=null,width:a,withFooter:!0}):null,name:"MessengerMediaViewerPhoto",pageletType:"media",children:[k.jsx(b("CometHero.react"),{description:"MWChatMediaViewerImage"}),c==null||o?k.jsx(h,{imageComponent:function(a){return k.jsx(b("CometPhotoViewerImageSuspense"),{alt:m,className:a,src:d},d)},withFooter:!0}):k.jsx(b("CometPressable.react"),{display:"inline",label:g._("Toque para ver o conte\u00fado sens\u00edvel"),onPress:function(){return p(!0)},children:k.jsx(h,{imageComponent:function(a){return k.jsx(b("CometPhotoViewerImageSuspense"),{alt:m,className:a,src:c},c)},withFooter:!0})})]},d)}e.exports=a},null);
__d("MWChatMediaViewerStage.react",["ix","fbt","requireDeferred","CometBlurredBackgroundImage.react","CometKeys","CometMediaViewerFilmstrip.react","CometTrackingNodeProvider.react","Locale","React","TetraCircleButton.react","deferredLoadComponent","fbicon","gkx","stylex","useLayerKeyCommands"],function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");c=b("React");var j=c.useMemo,k=b("deferredLoadComponent")(b("requireDeferred")("MWChatMediaViewerControls.react"));function a(a){var c=a.activeIndex,d=a.attachmentID,e=a.backgroundSrc,f=a.children,l=a.disableNextButton,m=a.disablePrevButton,n=a.downloadLink,o=a.hideNextButton,p=a.hidePrevButton,q=a.messageID,r=a.setActiveIndex,s=h._("Foto anterior"),t=h._("Pr\u00f3xima foto"),u=j(function(){var c=[];!p&&!m&&c.push({command:{key:b("CometKeys").LEFT},description:s,handler:function(){return r(a.activeIndex-1)}});!o&&!l&&c.push({command:{key:b("CometKeys").RIGHT},description:t,handler:function(){return r(a.activeIndex+1)}});return c},[l,m,o,p,t,s,a.activeIndex,r]);b("useLayerKeyCommands")(u);u=b("gkx")("1435437");return i.jsxs("div",{className:"iqfcb0g7 abiwlrkh l9j0dhe7 p01isnhg datstx6m buofh1pr cbu4d94t j83agx80 tqsryivl bp9cbjyn",ref:function(a){a&&a.focus()},tabIndex:"0",children:[i.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg akz8cqyu n7fi1qx3 i09qtzwb",children:e!=null?i.jsx(b("CometBlurredBackgroundImage.react"),{src:e}):null}),i.jsxs("div",{className:"k4urcfbm l9j0dhe7 j0qtgc86 e9n865no taijpn5t datstx6m buofh1pr j83agx80 rq0escxv",children:[u&&d!=null&&q!=null?i.jsx("div",{className:"tkr6xdv7 pmk7jnqg byvelhso oxoulkyr j83agx80 bp9cbjyn",children:i.jsx(k,{attachmentID:d,downloadLink:n,messageID:q})}):null,i.jsxs("div",{className:"kr520xx4 j9ispegn pmk7jnqg i1fnvgqd n7fi1qx3 j83agx80 i09qtzwb bp9cbjyn",children:[i.jsx("div",{className:"dhix69tm sjgh65i0 wkznzc2l tr9rh885"+(p?" kr9hpln1":""),children:i.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:143,children:i.jsx(b("TetraCircleButton.react"),{color:"secondary",disabled:m,icon:b("Locale").isRTL()?b("fbicon")._(g("492539"),24):b("fbicon")._(g("492491"),24),label:s,onPress:function(){return r(c-1)},size:48,testid:void 0,type:"overlay"})})}),i.jsx("div",{className:"dhix69tm sjgh65i0 wkznzc2l tr9rh885"+(o?" kr9hpln1":""),children:i.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:142,children:i.jsx(b("TetraCircleButton.react"),{color:"secondary",disabled:l,icon:b("Locale").isRTL()?b("fbicon")._(g("492491"),24):b("fbicon")._(g("492539"),24),label:t,onPress:function(){return r(c+1)},size:48,testid:void 0,type:"overlay"})})})]}),f]}),i.jsx("div",{className:"stjgntxs ni8dbmo4 d2edcug0",children:i.jsx(b("CometMediaViewerFilmstrip.react"),{activeIndex:c,images:a.thumbnails.map(function(a){return babelHelpers["extends"]({},a,{mediaType:"image"})}),onSetImage:r})})]})}e.exports=a},null);
__d("MWChatMediaViewerVideo.react",["CometRouteRenderType","MWChatVideoPlayer.react","React","stylex"],function(a,b,c,d,e,f){"use strict";var g,h=b("CometRouteRenderType").useIsPushView,i=b("React");function a(a){var c=h();return i.jsx("div",{className:(g||(g=b("stylex"))).dedupe({"align-items-1":"bp9cbjyn","display-1":"j83agx80","flex-grow-1":"buofh1pr","justify-content-1":"taijpn5t","min-height-1":"pnzxbu4t","width-1":"k4urcfbm"},c?{"height-1":"n626y76b"}:null,c?null:{"height-1":"ojb6a8i8"}),children:i.jsx(b("MWChatVideoPlayer.react"),{fbid:a.fbid,hdSrc:a.hdSrc,initialForceHD:!0,originalHeight:a.originalHeight,originalWidth:a.originalWidth,sdSrc:a.sdSrc,useDefaultControls:!0})})}e.exports=a},null);
__d("MWChatMediaRoot.react",["fbt","requireCond","CometContentNotAvailable.react","CometErrorBoundary.react","CometErrorRoot.react","CometRelay","CometRouteParams","MWChatDeleteMessageEventEmitter","MWChatMediaData","MWChatMediaReducer","MWChatMediaViewerImage.react","MWChatMediaViewerStage.react","MWChatMediaViewerVideo.react","MWChatMessageId.re","cr:1485119","React","WebPixelRatio","useIsMountedRef","MWChatMediaRootQuery.graphql"],function(a,b,c,d,e,f,g){"use strict";var h,i=(c=b("CometRelay")).fetchQuery;c.graphql;var j=c.usePreloadedQuery,k=c.useRelayEnvironment,l=b("CometRouteParams").useRouteParams,m=b("MWChatMediaData").normalizeMessages,n=b("MWChatMediaReducer").initialState,o=b("MWChatMediaReducer").reducer,p=b("MWChatMessageId.re").makeSent,q=b("React");d=b("React");var r=d.useCallback,s=d.useEffect,t=d.useReducer,u=d.useState,v=20,w=h!==void 0?h:h=b("MWChatMediaRootQuery.graphql");function x(a){var c=k(),d=l(),e=u(null),f=e[0],h=e[1];e=t(o,n);var x=e[0],y=x.curIdx,z=x.hasNextPage,A=x.hasPrevPage,B=x.initialCursor,C=x.isFetchingNextPage,D=x.isFetchingPrevPage,E=x.mediaList,F=e[1],G=b("useIsMountedRef")(),H=j(w,a.queries.messengerMediaRootQueryReference);if(f!==null)throw f;s(function(){var a;a=H==null?void 0:(a=H.message_thread)==null?void 0:(a=a.messages_with_attachments)==null?void 0:(a=a.edges[0])==null?void 0:a.cursor;if(a!=null&&B===null){var b;b=H==null?void 0:(b=H.message_thread)==null?void 0:(b=b.messages_with_attachments)==null?void 0:b.edges;if(b!=null){b=m(b);var c=0;d.attachment_id!=null&&(c=b.findIndex(function(a){return a.attachment.legacyAttachmentID===d.attachment_id}));F({curIdx:c,initialCursor:a,mediaList:b,type:"initialize"})}}},[B,H,d.attachment_id]);var I=H==null?void 0:(x=H.message_thread)==null?void 0:x.id;s(function(){var a=b("MWChatDeleteMessageEventEmitter").subscribe(function(a){var b=y,d=E.filter(function(c,d){c=c.messageID===a;c&&(d<=y&&y>0&&b--);return!c});d.length!==E.length&&(I!=null&&c.commitUpdate(function(a){return(a=a.get(I))==null?void 0:a.invalidateRecord()}));F({curIdx:b,mediaList:d,type:"messageDeleted"})});return a},[c,I,y,E]);var J=r(function(a){F({type:"startFetchingPrevPage"});return i(c,w,{before:a,last:v,scale:b("WebPixelRatio").get(),threadID:d.thread_id}).toPromise().then(function(a){var b;if(!G.current)return;a=a==null?void 0:(a=a.message_thread)==null?void 0:a.messages_with_attachments;b=m((b=a==null?void 0:a.edges)!=null?b:[]);if(b.length>0){F({hasPrevPage:(a=a==null?void 0:(a=a.page_info)==null?void 0:a.has_previous_page)!=null?a:!1,medias:b,type:"prevPageReceived"})}})["catch"](function(a){if(!G.current)return;h(a)})},[c,G,d.thread_id]),K=r(function(a){F({type:"startFetchingNextPage"});return i(c,w,{after:a,first:v,scale:b("WebPixelRatio").get(),threadID:d.thread_id}).toPromise().then(function(a){var b;if(!G.current)return;a=a==null?void 0:(a=a.message_thread)==null?void 0:a.messages_with_attachments;b=m((b=a==null?void 0:a.edges)!=null?b:[]);if(b.length>0){F({hasNextPage:(a=a==null?void 0:(a=a.page_info)==null?void 0:a.has_next_page)!=null?a:!1,medias:b,type:"nextPageReceived"})}})["catch"](function(a){if(!G.current)return;h(a)})},[c,G,d.thread_id]);s(function(){B!=null&&(K(B),J(B))},[c,K,J,B,d.thread_id]);var L=(a=(e=E[0])==null?void 0:e.cursor)!=null?a:null,M=(x=(f=E[E.length-1])==null?void 0:f.cursor)!=null?x:null;s(function(){y<=v/2&&A&&!D&&L!=null?J(L):y>=E.length-v/2&&z&&!C&&M!=null&&K(M)},[y,J,K,z,A,L,M,E.length,C,D]);e=E[y];if(B==null)return null;if(e==null)return q.jsx(b("CometContentNotAvailable.react"),{});a=E.map(function(a){var b=a.attachment.image,c=b.height,d=b.uri;b=b.width;return{alt:g._("Nenhuma descri\u00e7\u00e3o dispon\u00edvel."),height:c,key:(c=a.attachment.legacyAttachmentID)!=null?c:d,uri:d,width:b}}).filter(Boolean);return q.jsx(b("MWChatMediaViewerStage.react"),{activeIndex:y,attachmentID:e.attachment.legacyAttachmentID,backgroundSrc:e.attachment.image.uri,disableNextButton:C&&E[y+1]==null,disablePrevButton:D&&E[y-1]==null,downloadLink:e.__typename==="MessageVideo"?(f=e.attachment.hdUrl)!=null?f:e.attachment.sdUrl:e.attachment.image.downloadableUri,hideNextButton:!z&&E[y+1]==null,hidePrevButton:!A&&E[y-1]==null,messageID:typeof d.thread_id==="string"&&e.timestamp!=null?p(d.thread_id,e.messageID,e.timestamp):null,setActiveIndex:function(a){return F({curIdx:a,type:"viewMediaAtIndex"})},thumbnails:a,children:e.__typename==="MessageVideo"?q.jsx(b("MWChatMediaViewerVideo.react"),{fbid:e.nodeID,hdSrc:e.attachment.hdUrl!=null?e.attachment.hdUrl:void 0,originalHeight:e.attachment.originalDimensions.x,originalWidth:e.attachment.originalDimensions.y,sdSrc:e.attachment.sdUrl}):e.__typename==="MessageImage"?q.jsx(b("MWChatMediaViewerImage.react"),{blurredImageURI:e.attachment.blurredImageUri,imageURI:e.attachment.image.uri}):null})}function a(a){a=q.jsx(x,babelHelpers["extends"]({},a));return q.jsx(b("CometErrorBoundary.react"),{fallback:function(){return q.jsx(b("CometErrorRoot.react"),{})},children:b("cr:1485119")==null?a:q.jsx(b("cr:1485119"),{children:a})})}e.exports=a},null);